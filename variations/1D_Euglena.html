<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Euglena Typography</title>
    <style>
        body {
            background-color: white;
            color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: monospace;
            overflow: hidden;
        }
        .poem-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transform: rotate(-15deg); /* 全体を斜めに */
            transform-origin: center;
        }
        .line {
            display: flex;
            justify-content: center;
            transition: transform 3s ease-in-out, margin 3s ease-in-out;
            white-space: nowrap;
            font-size: 1.8rem;
            line-height: 0.9;
            margin: 2px 0; /* 初期のマージン */
            transform: rotate(15deg); /* 各行を水平に補正 */
        }
        
        /* 文字の長さを調整し、スピンドル形状を作る */
        .line:nth-child(1), .line:nth-child(19) { width: 5ch; }
        .line:nth-child(2), .line:nth-child(18) { width: 10ch; }
        .line:nth-child(3), .line:nth-child(17) { width: 15ch; }
        .line:nth-child(4), .line:nth-child(16) { width: 20ch; }
        .line:nth-child(5), .line:nth-child(15) { width: 25ch; }
        .line:nth-child(6), .line:nth-child(14) { width: 30ch; }
        .line:nth-child(7), .line:nth-child(13) { width: 35ch; }
        .line:nth-child(8), .line:nth-child(12) { width: 40ch; }
        .line:nth-child(9), .line:nth-child(11) { width: 45ch; }
        .line:nth-child(10) { width: 50ch; } /* 一番長く */

        /* アニメーション時のスタイル */
        .expanded {
            transform: scale(1.2, 2) rotate(10deg); /* 丸く膨らむ */
        }
        .stretched {
            transform: scaleY(4) rotate(6deg); /* Y方向のみ伸びる */
            margin-top: 40px;  /* 周囲の行を押し出す */
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
    <div class="poem-container">
        <div class="line">A</div>
        <div class="line">mighty</div>

        <div class="line">creature is </div>
        <div class="line">the germ, though</div>
        
        <div class="line"> smaller than the pachyderm.</div>
        <div class="line">His customary dwelling place</div>
        <div class="line"> is deep within the human race.</div> <!-- 一番長く -->

        <div class="line">His childish pride he often</div>

        <div class="line">pleases by giving people</div>
        <div class="line">strange diseases.</div>
        <div class="line">Do you, my poppet,</div>
     
        <div class="line">feel infirm?</div>
        <div class="line">You probably</div>
        <div class="line">contain</div>
        <div class="line">a germ.</div>
       
    </div>

    <script>
        function animateEuglena() {
            let lines = document.querySelectorAll(".line");
            let index = Math.floor(Math.random() * (lines.length - 2)); // ランダムな開始行（最後の2行は対象外）

            // 拡大する3行を取得
            let selectedLines = [lines[index], lines[index + 1], lines[index + 2]];
            let adjacentTop = lines[index - 1];
            let adjacentBottom = lines[index + 3];

            // ① 丸く膨らむ (2倍拡大)
            selectedLines.forEach(line => line.classList.add("expanded"));

            setTimeout(() => {
                // ② Y方向に4倍、X方向はそのまま
                selectedLines.forEach(line => {
                    line.classList.remove("expanded");
                    line.classList.add("stretched");
                });

                // 上下の行を押し出す
                if (adjacentTop) adjacentTop.style.marginBottom = "40px";
                if (adjacentBottom) adjacentBottom.style.marginTop = "40px";

                setTimeout(() => {
                    // ③ Y方向も元のサイズに戻す
                    selectedLines.forEach(line => line.classList.remove("stretched"));

                    // 押し出した行を元に戻す
                    if (adjacentTop) adjacentTop.style.marginBottom = "2px";
                    if (adjacentBottom) adjacentBottom.style.marginTop = "2px";

                }, 3000);
            }, 3000);
        }

        // 最初の実行を2秒後に設定
        setTimeout(() => {
            animateEuglena();
            setInterval(animateEuglena, 10000); // 10秒ごとに実行
        }, 200);
    </script>
</body>
</html>
