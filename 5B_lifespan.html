<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Germ - Lifespan of Microorganisms</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300;400;700&display=swap');

        body {
            background-color: black;
            color: white;
            font-family: 'Source Code Pro', monospace;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .poem-container {
            width: 90%;
            position: relative;
            height: 90vh;
        }

        .line {
            position: absolute;
            white-space: nowrap;
            animation: fadeIn 2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="poem-container" id="poem">
        <!-- Lines will be added dynamically -->
    </div>

    <script>
        const poemLines = [
            "A mighty creature is the germ,",
            "Though smaller than the pachyderm.",
            "His customary dwelling place",
            "Is deep within the human race.",
            "His childish pride he often pleases",
            "By giving people strange diseases.",
            "Do you, my poppet, feel infirm?",
            "You probably contain a germ."
        ];

        const lifespans = [ // Approximate lifespan mapping in years
            { name: "Deinococcus radiodurans", lifespan: 5000 }, // Ancient Bacteria
            { name: "Methuselah yeast", lifespan: 1000 },
            { name: "Streptomyces", lifespan: 300 },
            { name: "Bacillus subtilis", lifespan: 150 },
            { name: "E. coli", lifespan: 24 },
            { name: "Lactobacillus", lifespan: 12 },
            { name: "Saccharomyces cerevisiae", lifespan: 2 },
            { name: "Influenza Virus", lifespan: 0.1 } // Shortest lifespan
        ];

        const container = document.getElementById("poem");
        let usedYPositions = [];

        function getNonOverlappingY(min, max, step = 5) {
            let yPos;
            let attempts = 0;
            do {
                yPos = Math.floor(Math.random() * ((max - min) / step)) * step + min;
                attempts++;
            } while (usedYPositions.includes(yPos) && attempts < 10);
            usedYPositions.push(yPos);
            return yPos;
        }

        poemLines.forEach((line, index) => {
            const lifespan = lifespans[index].lifespan;
            const isOld = index % 2 === 0; // 左が古い微生物、右が新しい微生物
            const fontSize = lifespan > 100 ? "2.5rem" : lifespan > 50 ? "2rem" : "1.2rem";
            const letterSpacing = lifespan < 10 ? "-0.1rem" : lifespan < 50 ? "-0.02rem" : "0.1rem";
            const stretchFactor = lifespan > 100 ? "1.6" : lifespan < 10 ? "0.7" : "1";

            const lineDiv = document.createElement("div");
            lineDiv.classList.add("line");
            lineDiv.textContent = line;

            // 左が古い微生物、右が新しい微生物
            lineDiv.style.left = isOld ? "5%" : "50%"; 

            // Y座標をずらして配置
            lineDiv.style.top = `${getNonOverlappingY(10, 80, 5)}%`;

            // フォントの大きさやカーニングを調整
            lineDiv.style.fontSize = fontSize;
            lineDiv.style.letterSpacing = letterSpacing;
            lineDiv.style.transform = `scaleX(${stretchFactor})`;

            container.appendChild(lineDiv);
        });
    </script>
</body>
</html>
